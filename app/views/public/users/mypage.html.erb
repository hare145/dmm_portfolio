<div class="bg-dark">
  <div class="container">
    <div class="row p-4">
      <div class="col-2 align-self-center text-light">
        マイページ
      </div>
      <div class="col-6">
      </div>
      <div class="col-2 align-self-center">
        <%= link_to "登録情報を編集する", users_information_edit_path, class: "text-light" %>
      </div>
      <div class="col-2">
      <%= link_to "お気に入り一覧へ>>", users_bookmark_path, class: "btn btn-outline-warning" %>
    </div>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="row justify-content-end">
    
  </div>
</div>

<div class="bg_image_yellow">
  <div class="container mt-3 mb-4">
    <div class="row">
      <div class="col-4">
        <div class="container mb-4 p-2 shadow">
          <%= image_tag current_user.get_profile_image(400, 500), width: '100%', height: '100%'%>
        </div>
        <div class="container p-2"> 
          <div class="row justify-content-center m-4 p-2 border-bottom border-dark">
            <%= current_user.name %>
          </div>
          <div class="row justify-content-center h-100">
            <div class="col-4 text-center h-25 m-4 p-2 ">
              提供サービス
            </div>
            <div class="col-5 text-center m-4 p-2">
              <% current_user.userservice_services.each do |service| %>
                <p><%= service.content %></p>
              <% end %>
            </div>
          </div>
          <div class="row justify-content-center ">
            <div class="col-4 text-center m-4 p-2">
              従業員数
            </div>
            <div class="col-5 text-center m-4 p-2">
              <%= User.employees_i18n[current_user.employee] %>
            </div>
          </div>
        </div>
      </div>
      <div class="col-1">
      </div>
      <div class="col-7">
        <div class="p-1 fw-bold">
          会計・経理関係採用サイト
        </div>
        <table class="table m-0">
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.account_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.account_reason.nil? %>
                <%= safe_join(current_user.account_reason.split("\n"),tag(:br)) %>
              <% else %>
               <%= current_user.account_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.accounting_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.accounting_reason.nil? %>
                <%= safe_join(current_user.accounting_reason.split("\n"),tag(:br)) %>
              <% else %>
               <%= current_user.accounting_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.other_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.other_reason.nil? %>
                <%= safe_join(current_user.other_reason.split("\n"),tag(:br)) %>
              <% else %>
               <%= current_user.other_reason %>
              <% end %>
            </td>
          </tr>
        </table>
        <div class="p-1 mt-4 fw-bold">
          労務関係採用サイト
        </div>
        <table class="table m-0">
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.salary_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.salary_reason.nil? %>
                <%= safe_join(current_user.salary_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.salary_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.working_hours_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.working_hours_reason.nil? %>
                <%= safe_join(current_user.working_hours_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.working_hours_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.communication_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.communication_reason.nil? %>
                <%= safe_join(current_user.communication_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.communication_reason %>
              <% end %>
            </td>
          </tr>
        </table>
        <div class="p-1 mt-4 fw-bold">
          利用者関係採用サイト
        </div>
        <table class="table m-0">
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.customer_info_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.customer_info_reason.nil? %>
                <%= safe_join(current_user.customer_info_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.customer_info_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.customer_deposit_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.customer_deposit_reason.nil? %>
                <%= safe_join(current_user.customer_deposit_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.customer_deposit_reason %>
              <% end %>
            </td>
          </tr>
          <tr>
            <th class="col-4 text-center table-warning">
              <%= safe_join(current_user.customer_billing_soft.split("\n"),tag(:br)) %>
            </th>
            <td class="col-8">
              <% if not current_user.customer_billing_reason.nil? %>
                <%= safe_join(current_user.customer_billing_reason.split("\n"),tag(:br)) %>
              <% else %>
                <%= current_user.customer_billing_reason %>
              <% end %>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="bg-warning-subtle">
  <div class="container bg-light">
    <div class="container pt-5 pb-4">
      <div class="row">
        <div class="col-4">
          投稿コメント一覧(全<%= @usercomments.count + @softcomments.count %>件)
        </div>
        <div class="col-10">
        </div>
      </div>
    </div>
    
    <div class="container mt-4">
        <div class="row mt-3">
          <div class="col-3">
            ユーザー情報への投稿コメント一覧(全<%= @usercomments.count %>件)
          </div>
          <div class="col-9 mt-3 border-top border-dark">
          </div>
        </div>
        <% @usercomments.each do |usercomment| %>
          <div class="row mt-4 mx-2 mb-2">
            <div class="col-2">
              <%= link_to User.find(usercomment.page_id).name, facility_path(usercomment.page_id), class: "text-dark" %>
            </div>
            <div class="col-8">
            </div>
            <div class="col-2">
              <% if usercomment.is_public == true %>
                <%= link_to "非公開にする", user_usercomment_path(usercomment.page_id, usercomment.user_id, comment_id: usercomment.id, usercomment: {is_public: false}), method: :patch,
                    class: "m-1 btn btn-secondary btn-sm" %>
              <% else usercomment.is_public == false %>
                <%= link_to "公開にする", user_usercomment_path(usercomment.page_id, usercomment.user_id, comment_id: usercomment.id, usercomment: {is_public: true}), method: :patch,
                  class: "m-1 btn btn-success btn-sm" %>
              <% end %>
            </div>
          </div>
          <div class="row ms-3 me-3 mb-3 p-2 bg-warning-subtle">
            <%= safe_join(usercomment.content.split("\n"),tag(:br)) %>
          </div>
        <% end %>
      
      <div class="container mt-5">
        <div class="row">
          <div class="col-3">
            ソフト情報への投稿コメント一覧(全<%= @softcomments.count %>件)
          </div>
          <div class="col-9 mt-3 border-top border-dark">
          </div>
        </div>
        <% @softcomments.each do |softcomment| %>
          <div class="row mt-4 mx-2 mb-2">
            <div class="col-2">
              <%= link_to Soft.find(softcomment.soft_id).company, soft_path(softcomment.soft_id), class: "text-dark" %>
            </div>
            <div class="col-8">
            </div>
            <div class="col-2">
              <% if softcomment.is_public == true %>
                <%= link_to "非公開にする", soft_softcomment_path(softcomment.soft_id, id: softcomment.id,
                    softcomment: {is_public: false}), method: :patch, class: "m-1 btn btn-secondary btn-sm" %>
              <% else softcomment.is_public == false %>
                <%= link_to "公開にする", soft_softcomment_path(softcomment.soft_id, id: softcomment.id,
                    softcomment: {is_public: true}), method: :patch, class: "m-1 btn btn-success btn-sm" %>
              <% end %>
            </div>
          </div>
          <div class="row ms-3 me-3 mb-3 p-2 bg-primary-subtle">
            <%= safe_join(softcomment.content.split("\n"),tag(:br)) %>
          </div>
        <% end %>
      </div>
      <div class="row pt-4 pb-3">
        <div class="col-10">
        </div>
        <div class="col-2">
          <%= link_to "一覧はこちら>>", users_mycomment_path %>
        </div>
      </div>
    </div>
  </div>
</div>
